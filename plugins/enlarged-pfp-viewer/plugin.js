(function(p,u,o){"use strict";function y(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,Object.freeze(n)}var a=y(p);const i=[];var s={patch:e=>e&&i.push(e),unpatchAll:()=>i.forEach(e=>e()),lazyPatchContextMenu:async(e,n)=>{const t=l=>l.default&&l.default.displayName===e,r=o.find(t);if(r)n(r);else{const l=o.findByProps("openContextMenuLazy");let x=u.before("openContextMenuLazy",l,c=>{const L=c[1];return c[1]=async()=>{const E=await L(c[0]);return B=>{const m=E(B);return m?.type?.displayName===e&&n&&(x(),n(o.find(t)),n=!1),m}},c})}}};const M=o.findByDisplayName("ImageModal"),h=o.findByDisplayName("MaskedLink"),d=o.findByProps("MenuGroup","MenuItem"),P=o.findByProps("ModalCloseButton"),{downloadLink:z}=o.findByProps("downloadLink"),{openModal:C}=o.findByProps("openModal","openModalLazy"),f=e=>`${e.substring(0,e.lastIndexOf("."))}.png?size=1024`;var g=()=>({onLoad(){["DMUserContextMenu","GuildChannelUserContextMenu"].map(e=>{s.lazyPatchContextMenu(e,n=>{s.patch(u.after("default",n,([t],r)=>{r?.props?.children?.props?.children?.splice(2,0,a.createElement(a.Fragment,null,a.createElement(d.MenuSeparator,null),a.createElement(d.MenuItem,{label:"Enlarge PFP",id:"enlarge",action:()=>{C(l=>a.createElement(P.ModalRoot,{transitionState:l.transitionState,size:"medium"},a.createElement(M,{height:1024,width:1024,src:f(t.user.getAvatarURL())}),a.createElement(h,{className:z,href:f(t.user.getAvatarURL())},"Open original")))}})))}))})})},onUnload(){s.unpatchAll()}});return g})(cumcord.modules.common.React,cumcord.patcher,cumcord.modules.webpack);
