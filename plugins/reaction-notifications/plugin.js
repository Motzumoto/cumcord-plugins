(function(f,s,y,O,t,n){"use strict";var L=()=>cumcord.patcher.injectCSS(".reaction-notifications-body{display:grid;grid-gap:12px;padding:8px 20px;align-items:center;border-radius:0;grid-template-columns:32px auto 40px}.reaction-notifications-username{flex-grow:1;cursor:pointer;font-weight:500;text-overflow:ellipsis;color:var(--text-normal)}.reaction-notifications-container{position:relative;background-color:var(--background-primary)}.reaction-notifications-message{padding:16px 16px 4px 0}.reaction-notifications-username:hover{text-decoration:underline}.reaction-notifications-first-message{border-radius:8px 8px 0 0}.reaction-notifications-last-reaction{border-radius:0 0 8px 8px}");/**
* NOTICE OF LICENSE
*
* This source file is subject to the GNU General Public License (GPL-3.0).
* You can find more information in the LICENSE.md file.
* More information is also avaliable at this URL:
* https://opensource.org/licenses/GPL-3.0
*
*
* @copyright Copyright (c) 2022 Paige Jordan
* @license   GPL-3.0 GNU General Public License v3.0
* @link      https://github.com/swishs-client-mod-plugins/cumcord-plugins/tree/main/plugins/reaction-notifications
*/n.findByProps("colorStatusRed"),n.findByDisplayName("Text");const _=n.findByDisplayName("Slider");n.findByDisplayName("Divider"),n.findByDisplayName("FormText");const H=n.findByDisplayName("Speaker"),G=n.findByDisplayName("TextInput"),m=n.findByDisplayName("FormTitle"),u=n.findByDisplayName("SwitchItem"),g=n.findByProps("soundRow");var V=()=>{f.useNest(s.persist);const e={link:"",volume:1,createSound:!0,mentionSound:!0,sendInChannel:!0};for(let r in e)s.persist.ghost.hasOwnProperty(r)||(s.persist.store[r]=e[r]);return t.React.createElement(t.React.Fragment,null,t.React.createElement(m,null,"INBOX"),t.React.createElement(u,{onChange:()=>s.persist.store.disableInbox=!s.persist.ghost.disableInbox,value:s.persist.ghost.disableInbox,hideBorder:!0},"Disable recent reactions in inbox (requires reload)"),t.React.createElement(u,{note:"Add reactions to the inbox even if the reaction is from the current channel.",onChange:()=>s.persist.store.addFromCurrent=!s.persist.ghost.addFromCurrent,value:s.persist.ghost.addFromCurrent,disabled:s.persist.ghost.disableInbox},"Add to inbox from current channel"),t.React.createElement(m,null,"NOTIFICATIONS"),t.React.createElement(u,{onChange:()=>s.persist.store.disableNotifications=!s.persist.ghost.disableNotifications,value:s.persist.ghost.disableNotifications,hideBorder:!0},"Disable notifications"),t.React.createElement(u,{onChange:()=>s.persist.store.sendInDND=!s.persist.ghost.sendInDND,value:s.persist.ghost.sendInDND,disabled:s.persist.ghost.disableNotifications,hideBorder:!0},"Send notifications while in DND mode"),t.React.createElement(u,{note:"Send notifications even if the reaction is from the current channel.",onChange:()=>s.persist.store.sendInCurrent=!s.persist.ghost.sendInCurrent,value:s.persist.ghost.sendInCurrent,disabled:s.persist.ghost.disableNotifications},"Send notifications from the current channel"),t.React.createElement(m,{className:`${g.notificationSound} ${g.soundRow}`},"AUDIO",t.React.createElement("div",{className:g.soundIcon,onClick:()=>{if(!s.persist.ghost.createSound)return;const r="https://discord.com/assets/dd920c06a01e5bb8b09678581e29d56f.mp3",i=new Audio(s.persist.ghost.mentionSound?r:s.persist.ghost.link);i.volume=s.persist.ghost.volume,i.play()}},t.React.createElement(H,{width:15,height:24}))),t.React.createElement(u,{note:'Psst! You can preview the sound by hovering over "Audio" and clicking on the speaker!',onChange:()=>s.persist.store.createSound=!s.persist.ghost.createSound,value:s.persist.ghost.createSound,hideBorder:!0},"Create sound on notification"),t.React.createElement(u,{onChange:()=>s.persist.store.mentionSound=!s.persist.ghost.mentionSound,value:s.persist.ghost.mentionSound,disabled:!s.persist.ghost.createSound,hideBorder:!0},"Use default mention sound"),t.React.createElement(m,null,"AUDIO LINK"),t.React.createElement(G,{size:"default",className:"codeRedemptionInput-fKM0fu",onChange:r=>s.persist.store.link=r,disabled:s.persist.ghost.mentionSound||!s.persist.ghost.createSound,value:s.persist.ghost.link}),t.React.createElement("div",{style:{paddingBottom:"20px"}}),t.React.createElement(m,null,"VOLUME (DEFAULT IS 100%)"),t.React.createElement(_,{initialValue:s.persist.ghost.volume*100,minValue:0,maxValue:100,disabled:!s.persist.ghost.createSound,onValueChange:r=>s.persist.store.volume=r/100}),t.React.createElement("div",{style:{paddingBottom:"20px"}}))};const I=[];var h={patch:e=>e&&I.push(e),unpatchAll:()=>I.forEach(e=>e())};/**
* NOTICE OF LICENSE
*
* This source file is subject to the GNU General Public License (GPL-3.0).
* You can find more information in the LICENSE.md file.
* More information is also avaliable at this URL:
* https://opensource.org/licenses/GPL-3.0
*
*
* @copyright Copyright (c) 2022 Paige Jordan
* @license   GPL-3.0 GNU General Public License v3.0
* @link      https://github.com/swishs-client-mod-plugins/cumcord-plugins/tree/main/plugins/reaction-notifications
*/const v=n.findByDisplayName("Text"),Z=n.findByDisplayName("Reactions"),K=n.findByDisplayNameAll("Header")[1],p=n.find(e=>e.prototype?.getGuildId),q=n.findByDisplayName("Checkmark"),x=n.findByDisplayName("FormDivider"),M=n.findByProps("AnimatedAvatar").default,J=n.findByDisplayName("CircleIconButton"),E=n.findByProps("MenuGroup","MenuItem"),X=n.findByDisplayNameAll("EmojiSmile")[1],Y=n.findByDisplayName("InboxEmptyStateStars"),b=n.find(e=>e.prototype?.toDate&&e.prototype.month),Q=n.findByDisplayName("RecentsChannelHeader"),S=n.find(e=>e.type?.displayName==="ChannelMessage"),A=n.find(e=>e.prototype?.getReaction&&e.prototype.isSystemDM),{transitionTo:T}=n.findByProps("transitionTo"),{openUserProfileModal:P}=n.findByProps("openUserProfileModal"),{openContextMenu:W,closeContextMenu:w}=n.findByProps("openContextMenu"),c={Sizes:n.findByProps("size10"),Button:n.findByProps("size32"),Stars:n.findByProps("stars","protip"),Colors:n.findByProps("colorStatusGreen")},D=()=>t.React.createElement("div",{className:"reaction-notifications-container",style:{borderRadius:"8px",marginTop:"8px",marginLeft:"16px"}},t.React.createElement(S,{channel:new p({id:"uwu"}),message:new A({content:"rape",timestamp:new b("2021-09-24T22:20:42.723Z"),author:{id:"192760945766957066",username:"creatable",toString:()=>"creatable",isSystemUser:()=>!1,getAvatarURL:()=>"https://cdn.discordapp.com/avatars/192760945766957066/629d2de47aab4d95fe45d846abfb083a.webp?size=80"}}),style:{paddingTop:"8px",marginLeft:"4px",textAlign:"left",marginRight:"132px"}}),t.React.createElement(S,{channel:new p({id:"uwu"}),message:new A({content:"LMAO",timestamp:new b("2021-09-24T22:20:42.723Z"),author:{id:"257109471589957632",username:"Beef",toString:()=>"Beef",isSystemUser:()=>!1,getAvatarURL:()=>"https://cdn.discordapp.com/avatars/257109471589957632/d1edbec71d56736a68bc639ed7da43d0.webp?size=80"}}),style:{marginLeft:"4px",textAlign:"left",paddingBottom:"8px"}})),k=()=>t.React.createElement("div",{className:c.Stars.container},t.React.createElement("div",{className:c.Stars.iconContainer},t.React.createElement(X,{className:c.Stars.icon,width:36,height:36}),t.React.createElement(Y,{className:c.Stars.stars})),t.React.createElement(K,{className:c.Stars.header,size:c.Sizes.size24},"No reactions here!"),t.React.createElement(v,{className:c.Colors.colorHeaderSecondary,size:c.Sizes.size12},t.React.createElement(v,{tag:"span",className:c.Stars.protip,color:c.Colors.colorStatusGreen,size:c.Sizes.size12},"Protip:"," "),Math.random()<.1?t.React.createElement(D,null):"Cumming is always funner with friends!")),ee=e=>t.React.createElement(Q,{channel:e.channel,gotoChannel:()=>{T(`/channels/${e.channel.guildId||"@me"}/${e.channel.id}/${e.message}`)}},t.React.createElement(J,{className:`${c.Button.button} ${c.Button.tertiary}`,onClick:()=>delete s.persist.store.reactions[e.channel.id],tooltip:"Mark as Read",icon:t.React.createElement(q,{height:16,width:16})})),te=e=>t.React.createElement(t.React.Fragment,null,e.isFirstMessage||t.React.createElement(x,null),t.React.createElement("div",{className:`reaction-notifications-message ${!e.isFirstMessage||"reaction-notifications-first-message"} reaction-notifications-container`},t.React.createElement(S,{message:e.message,channel:e.channel,onContextMenu:r=>W(r,()=>t.React.createElement(t.React.Fragment,null,t.React.createElement(E.default,{onClose:w},t.React.createElement(E.MenuItem,{label:"Jump to Message",id:"jump",action:()=>{T(`/channels/${e.channel.guildId||"@me"}/${e.channel.id}/${e.message.id}`)}}),t.React.createElement(E.MenuItem,{label:"Delete Message",id:"delete",action:()=>{delete s.persist.store.reactions[e.channel.id][e.message.id]}}))))}))),se=e=>t.React.createElement(t.React.Fragment,null,t.React.createElement(x,null),t.React.createElement("div",{className:`reaction-notifications-body ${!e.isLastReaction||"reaction-notifications-last-reaction"} reaction-notifications-container`},t.React.createElement(M,{src:e.user.getAvatarURL(),size:M.Sizes.SIZE_32,onClick:()=>P({userId:e.user.id})}),t.React.createElement("div",{className:"reaction-notifications-username",onClick:()=>P({userId:e.user.id})},e.user.username,"#",e.user.discriminator),t.React.createElement("div",{className:"reaction-notifications-reactions"},t.React.createElement(Z,{channel:new p({id:"uwu"}),message:{getChannelId:()=>"uwu!",reactions:[{count:e.count,emoji:e.reaction.emoji,me:!1}]},disableReactionCreates:!0,disableReactionUpdates:!0}))));/**
* NOTICE OF LICENSE
*
* This source file is subject to the GNU General Public License (GPL-3.0).
* You can find more information in the LICENSE.md file.
* More information is also avaliable at this URL:
* https://opensource.org/licenses/GPL-3.0
*
*
* @copyright Copyright (c) 2022 Paige Jordan
* @license   GPL-3.0 GNU General Public License v3.0
* @link      https://github.com/swishs-client-mod-plugins/cumcord-plugins/tree/main/plugins/reaction-notifications
*/const{getGuild:ne}=n.findByProps("getGuild"),{getChannel:ie}=n.findByProps("getDMUserIds"),{transitionTo:re}=n.findByProps("transitionTo"),{getChannelId:U}=n.findByProps("getVoiceChannelId"),{showNotification:ae}=n.findByProps("showNotification"),{getStatus:oe}=n.findByProps("getStatus","getPresence"),{getMessage:ce}=n.findByProps("getMessage","getMessages"),{AdvancedScrollerThin:de}=n.findByProps("AdvancedScrollerThin"),{getUser:le,getCurrentUser:ue}=n.findByProps("getUser","getCurrentUser"),he=n.findByProps("Header","Item"),C=n.findByProps("getFullState","settings"),$=n.find(e=>e.default?.displayName==="RecentsHeader"),fe=n.find(e=>e.default?.displayName==="RecentMentions"),me=n.find(e=>e.default?.displayName==="UnreadMessages"),N={...n.findByProps("tab","header"),...n.findByProps("messageContainer")},F=e=>{if(s.persist.ghost.disableNotifications)return;const r=ue().id;if(e?.userId!==r){const i=ce(e.channelId,e.messageId);if(i?.author.id===r){const o=le(e.userId),a=ie(e.channelId),d=ne(a.guild_id);if(!s.persist.ghost.addFromCurrent&&U()===a.id||s.persist.ghost.disableInbox||(s.persist.ghost.reactions[a.id]||(s.persist.store.reactions[a.id]={channel:a}),s.persist.ghost.reactions[a.id][i.id]||(s.persist.store.reactions[a.id][i.id]=[i]),s.persist.store.reactions[a.id][i.id].push({reaction:e,guild:d,user:o,message:i,channel:a,count:i.reactions.find(l=>l.emoji.name===e.emoji.name&&l.emoji.id===e.emoji.id).count})),!(!s.persist.ghost.sendInCurrent&&U()===a.id)&&(s.persist.ghost.sendInDND||oe(r)!=="dnd")&&(ae(o.getAvatarURL(),`${o.username}${d?` (#${a.name}, ${d.name})`:""}`,`New Reaction: ${e.emoji.name}`,{onClick:()=>re(path)}),s.persist.ghost.createSound)){const l="https://discord.com/assets/dd920c06a01e5bb8b09678581e29d56f.mp3",R=new Audio(s.persist.ghost.mentionSound?l:s.persist.ghost.link);R.volume=s.persist.ghost.volume,R.play()}}}},j=()=>{const e=s.persist.ghost.reactions,r=[[]];return f.useNest(s.persist),Object.keys(e).forEach((i,o)=>{if(r[o]||r.push([]),Object.keys(e[i]).length===1){delete e[i];return}r[o].push(t.React.createElement(ee,{channel:e[i].channel,message:e[i][Object.keys(e[i])[1]][0].id})),Object.keys(e[i]).forEach((a,d,l)=>{if(a==="channel")return;const R=d===1,pe=d===l.length-1;r[o].push(t.React.createElement(te,{isFirstMessage:R,message:e[i][a][0],channel:e[i].channel})),e[i][a].forEach((Ee,z,B)=>{if(z===0)return;B.length===1&&delete e[i][a];const Se=pe&&(B.length===1||z===B.length-1);r[o].push(t.React.createElement(se,{...Ee,isLastReaction:Se}))})})}),t.React.createElement(O.ErrorBoundary,null,t.React.createElement(de,{fade:!0},r[0].length?r.map(i=>t.React.createElement("div",{className:N.container},i)):t.React.createElement(k,null)))},ye=()=>{const e=({__originalType:r,...i})=>{const o=r.call(void 0,i);try{C.settings.inbox.currentTab===3&&(o.props.children[1]=t.React.createElement(j,null))}catch(a){console.error("RecentMentions patch failed:",a)}return o};h.patch(y.after("default",fe,(r,i)=>{Object.assign(i.props,{__originalType:i.type}),i.type=e})),h.patch(y.after("default",me,(r,i)=>{C.settings.inbox.currentTab===3&&(i.props.children[1]=t.React.createElement(j,null))}))},Re=()=>{const e=({__originalType:r,...i})=>{const o=r.call(void 0,i);if(i.tab!==3)return o;try{const a=f.findInReactTree(o,d=>typeof d?.onClick=="function");if(!a)return o;a.onClick=()=>s.persist.store.reactions={}}catch(a){console.error("ReadAllButton patch failed:",a)}return o};h.patch(y.before("default",$,([r])=>{r.tab=C.settings.inbox.currentTab})),h.patch(y.after("default",$,([r],i)=>{const o=f.findInReactTree(i,l=>l?.onItemSelect),a=f.findInReactTree(i,l=>typeof l?.props?.onClick=="function"),d=o?.children;!Array.isArray(d)||(a&&(Object.assign(a.props,{__originalType:a.type,tab:r.tab}),a.type=e),d.push(t.React.createElement(he.Item,{id:3,look:0,className:`${N.tab}${r.tab===3?` ${N.active}`:""}`},"Reactions")))}))};var ge=()=>({onLoad(){s.persist.ghost.reactions||(s.persist.store.reactions={}),t.FluxDispatcher.subscribe("MESSAGE_REACTION_ADD",F),s.persist.ghost.disableInbox||(h.patch(L()),ye(),Re())},onUnload(){t.FluxDispatcher.unsubscribe("MESSAGE_REACTION_ADD",F),h.unpatchAll()},settings:t.React.createElement(V,null)});return ge})(cumcord.utils,cumcord.pluginData,cumcord.patcher,cumcord.ui.components,cumcord.modules.common,cumcord.modules.webpack);
