(function(C,e,u,v,n,G){"use strict";function M(t){if(t&&t.__esModule)return t;var l=Object.create(null);return t&&Object.keys(t).forEach(function(s){if(s!=="default"){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(l,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}}),l.default=t,Object.freeze(l)}var c=M(C);const f=[];var d={patch:t=>t&&f.push(t),unpatchAll:()=>f.forEach(t=>t())};const{colorStatusRed:g}=n.findByProps("colorStatusRed"),E=n.findByDisplayName("Text"),P=n.findByDisplayName("FormText"),i=n.findByDisplayName("SwitchItem");var B=()=>(G.useNest(e.persist),c.createElement(c.Fragment,null,c.createElement(i,{note:"Delete messages (if you can) when you hold delete and clock on them.",onChange:()=>e.persist.store.deleteMessages=!e.persist.ghost.deleteMessages,value:e.persist.ghost.deleteMessages},"Delete Messages"),c.createElement(i,{note:"Delete all channel types when you hold delete and click on them.",onChange:()=>e.persist.store.deleteChannels=!e.persist.ghost.deleteChannels,value:e.persist.ghost.deleteChannels},"Delete Channels"),c.createElement(i,{note:"Close direct message channels when you hold delete and click on them.",onChange:()=>e.persist.store.closeDMs=!e.persist.ghost.closeDMs,value:e.persist.ghost.closeDMs},"Close DMs"),c.createElement(i,{note:"Will leave guilds when you hold down delete and click on them.",onChange:()=>e.persist.store.leaveGuilds=!e.persist.ghost.leaveGuilds,value:e.persist.ghost.leaveGuilds},"Leave Guilds"),c.createElement(i,{note:"Delete roles in the role menu when you hold delete and click on them.",onChange:()=>e.persist.store.deleteRoles=!e.persist.ghost.deleteRoles,value:e.persist.ghost.deleteRoles},"Delete Roles"),c.createElement(i,{note:c.createElement(P,{type:"description"},c.createElement(E,{tag:"span",style:{fontWeight:"bold"},color:g},"WARNING:"," "),"no confirmation will be asked for, I would recommend leaving this off."),onChange:()=>e.persist.store.deleteGuilds=!e.persist.ghost.deleteGuilds,value:e.persist.ghost.deleteGuilds,disabled:!e.persist.ghost.leaveGuilds},"Delete Guilds")));const R=()=>{if(!e.persist.ghost.deleteMessages)return;const t=n.findByProps("canManageUser"),{deleteMessage:l}=n.findByProps("deleteMessage"),{getCurrentUser:s}=n.findByProps("getCurrentUser"),o=n.find(r=>r.default?.displayName==="Message");return u.after("default",o,([r],a)=>{if(!r?.childrenAccessories?.props||!a?.props)return a;const p=r.childrenAccessories.props.message,y=r.childrenAccessories.props.channel,L=t.can(v.constants.Permissions.MANAGE_MESSAGES,y),_=s().id===p?.author?.id;a.props.children.props.onClick=()=>{!h||!(L||_)||l(y.id,p.id)}})},S=()=>{if(!e.persist.ghost.closeDMs&&!e.persist.ghost.deleteChannels)return;const{deleteChannel:t}=n.findByProps("deleteChannel"),l=n.findByProps("selectChannel");return u.instead("selectChannel",l,(s,o)=>{if(s[0]==="@me"&&!e.persist.ghost.closeDMs)return o(...s);if(s[0]!=="@me"&&!e.persist.ghost.deleteChannels)return o(...s);if(!h)return o(...s);t(s[1])})},A=()=>{if(!e.persist.ghost.deleteChannels)return;const{deleteChannel:t}=n.findByProps("deleteChannel"),l=n.findByProps("selectVoiceChannel");return u.instead("selectVoiceChannel",l,(s,o)=>{if(!h)return o(...s);t(s[0])})},N=()=>{if(!e.persist.ghost.leaveGuilds)return;const{leaveGuild:t,deleteGuild:l}=n.findByProps("leaveGuild"),{getGuild:s}=n.findByProps("getGuild"),o=n.findByProps("selectGuild");return u.instead("selectGuild",o,([r],a)=>{if(!h)return a(...r);t(r).catch(()=>!e.persist.ghost.deleteGuilds||l(r,s(r).name))})},O=()=>{if(!e.persist.ghost.deleteRoles)return;const{deleteRole:t}=n.findByProps("deleteRole"),{getGuildId:l}=n.findByProps("getGuildId"),s=n.findByProps("selectRole");return u.instead("selectRole",s,(o,r)=>{if(!h)return r(...o);t(l(),o[0])})};let h;const m=t=>t.key==="Delete"&&(h=t.type==="keydown");var I=()=>({onLoad(){document.addEventListener("keydown",m),document.addEventListener("keyup",m),d.patch(R()),d.patch(S()),d.patch(A()),d.patch(N()),d.patch(O())},onUnload(){document.removeEventListener("keydown",m),document.removeEventListener("keyup",m),d.unpatchAll()},settings:c.createElement(B,null)});return I})(cumcord.modules.common.React,cumcord.pluginData,cumcord.patcher,cumcord.modules.common,cumcord.modules.webpack,cumcord.utils);
